!Configuration File for keepalived
net_namespace low

global_defs {
   router_id IPVS-LAN-102
   notification_email {
     mail@example.com
                      }
   notification_email_from ipvs-lan-102
   smtp_server 10.10.10.10
   smtp_connect_timeout 30
            }

!##############################################################################################


virtual_server 10.9.200.4 6379    {
virtualhost 10.9.200.4:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.4/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.4/32 dev lo"


real_server 10.1.62.3 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


!real_server 10.2.60.4 16390 {
!        TCP_CHECK {
!            connect_timeout 3
!                   }
!                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.45 6379    {
virtualhost 10.9.200.45:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.45/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.45/32 dev lo"


!real_server 10.1.62.3 16392 {
!        TCP_CHECK {
!            connect_timeout 3
!                   }
!                           }


real_server 10.2.60.4 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.50 6379     {
virtualhost 10.9.200.50:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.50/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.50/32 dev lo"


real_server 10.1.46.12 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }


real_server 10.2.42.12 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }
                                     }

!##############################################################################################


virtual_server 10.9.200.6 80       {
virtualhost 10.9.200.6:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.6/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.6/32 dev lo"


real_server 10.1.52.2 80 {
        TCP_CHECK {
            connect_timeout 3
                   }
                          }


real_server 10.2.48.2 80 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                     }

!##############################################################################################


virtual_server 10.9.200.6 8020       {
virtualhost 10.9.200.6:8020
        delay_loop 10
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.6/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.6/32 dev lo"


real_server 10.1.52.2 8020 {
        TCP_CHECK {
            connect_timeout 3
                   }
                          }


real_server 10.2.48.2 8020 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                     }

!##############################################################################################


virtual_server 10.9.200.64 80        {
virtualhost 10.9.200.64:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        persistence_timeout 86400
        protocol TCP

     quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.64/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.64/32 dev lo"


real_server 10.2.41.2 80 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.1.45.3 80 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                      }

!#############################################################################################


virtual_server 10.9.200.37 63790    {
virtualhost 10.9.200.37:63790
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.37/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.37/32 dev lo"


real_server 10.1.73.5 63790 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.1.73.5 63790"
                    }
                             }


real_server 10.2.59.5 63790 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.2.59.5 63790"
                    }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.38 63792    {
virtualhost 10.9.200.38:63792
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.38/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.38/32 dev lo"


real_server 10.1.73.5 63792 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.1.73.5 63792"
                    }
                             }


real_server 10.2.59.5 63792 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.2.59.5 63792"
                    }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.39 63794    {
virtualhost 10.9.200.39:63794
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.39/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.39/32 dev lo"


real_server 10.1.73.5 63794 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.1.73.5 63794"
                    }
                             }


real_server 10.2.59.5 63794 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.2.59.5 63794"
                    }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.40 63796    {
virtualhost 10.9.200.40:63796
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.40/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.40/32 dev lo"


real_server 10.1.73.5 63796 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.1.73.5 63796"
                    }
                             }


real_server 10.2.59.5 63796 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.2.59.5 63796"
                    }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.63 3306      {
virtualhost 10.9.200.63:3306
        delay_loop 11
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.63/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.63/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.26"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.26"
                  }
                           }
                                      }

!##############################################################################################


virtual_server 10.9.200.7 80       {
virtualhost 10.9.200.7:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo rr
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.7/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.7/32 dev lo"


real_server 10.1.39.11 80 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.1.39.11"
                    }
                          }


real_server 10.1.39.12 80 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.1.39.12"
                     }
                          }


real_server 10.2.73.11 80 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.2.73.11"
                     }
                          }


real_server 10.2.73.12 80 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.2.73.12"
                     }
                           }
                                    }

!##########################################################################################


virtual_server 10.9.200.7 443       {
virtualhost 10.9.200.7:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo rr
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.7/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.7/32 dev lo"


real_server 10.1.39.11 443 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.1.39.11"
                    }
                          }


real_server 10.1.39.12 443 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.1.39.12"
                     }
                          }
  

real_server 10.2.73.11 443 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.2.73.11"
                     }
                          }


real_server 10.2.73.12 443 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Ping-Pong 10.2.73.12"
                     }
                           }
                                    }

!##########################################################################################


virtual_server 10.9.200.16 63790    {
virtualhost 10.9.200.16:63790
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.16/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.16/32 dev lo"


real_server 10.1.47.3 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.43.4 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.17 63792    {
virtualhost 10.9.200.17:63792
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.17/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.17/32 dev lo"


real_server 10.1.47.3 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.43.4 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }
!##############################################################################################


virtual_server 10.9.200.18 63794    {
virtualhost 10.9.200.18:63794
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.18/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.18/32 dev lo"


real_server 10.1.47.3 16394 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.43.4 16394 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.19 63796    {
virtualhost 10.9.200.19:63796
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.19/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.19/32 dev lo"


real_server 10.1.47.3 16396 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.43.4 16396 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.10 80          {
virtualhost 10.9.200.10:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.10/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.10/32 dev lo"


real_server 10.1.20.2 80  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }


real_server 10.2.20.2 80  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                             }


real_server 10.10.20.2 80  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                             }
                                        }

!#############################################################################################


virtual_server 10.9.200.11 9200        {
virtualhost 10.9.200.11:9200
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.11/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.11/32 dev lo"


real_server 10.1.20.2 9200  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }


real_server 10.2.20.2 9200  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }


real_server 10.10.20.2 9200  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }
                                        }

!#############################################################################################


virtual_server 10.9.200.11 5140        {
virtualhost 10.9.200.11:5140
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol UDP


real_server 10.9.5.146 5140  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }



real_server 10.2.20.105 5140  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }

                                         }

!#############################################################################################


virtual_server 10.9.200.11 5141         {
virtualhost 10.9.200.11:5141
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol UDP


real_server 10.1.20.2 5141  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }


real_server 10.2.20.2 5141  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }


real_server 10.10.20.2 5141  {
       weight 1
         TCP_CHECK {
             connect_timeout 3
                    }
                            }
                                         }

!##############################################################################################


virtual_server 10.9.200.58 3306         {
virtualhost 10.9.200.58:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.58/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.58/32 dev lo"


real_server 10.1.72.86 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.86"
                  }
                           }


real_server 10.2.72.86 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.86"
                  }
                           }
                                        }

!##############################################################################################


virtual_server 10.9.200.52 3306        {
virtualhost 10.9.200.52:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.52/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.52/32 dev lo"


real_server 10.1.72.86 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.72.86"
                  }
                           }


real_server 10.2.72.86 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.72.86"
                  }
                           }
                                       }

!##############################################################################################


virtual_server 10.9.200.26 3306      {
virtualhost 10.9.200.26:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.26/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.26/32 dev lo"


real_server 10.1.55.22 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.55.22"
                    }
                             }


real_server 10.1.55.23 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.55.23"
                    }
                             }


real_server 10.2.30.22 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.30.22"
                    }
                             }


real_server 10.2.30.23 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.30.23"
                    }
                             }
                                     }

!##############################################################################################


virtual_server 10.9.200.35 3306     {
virtualhost 10.9.200.35:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.35/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.35/32 dev lo"


real_server 10.1.55.21 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.55.21"
                    }
                             }


real_server 10.2.30.21 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.30.21"
                    }
                             }
                                      }

!##############################################################################################


virtual_server 10.9.200.36 3306      {
virtualhost 10.9.200.36:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.36/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.36/32 dev lo"


real_server 10.1.55.21 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.55.21"
                    }
                             }


real_server 10.2.30.21 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.30.21"
                    }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.47 3306      {
virtualhost 10.9.200.47:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.47/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.47/32 dev lo"


real_server 10.1.55.28 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.55.28"
                    }
                             }


real_server 10.2.30.28 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.30.28"
                    }
                             }
                                     }

!##############################################################################################


virtual_server 10.9.200.14 6379      {
virtualhost 10.9.200.14:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.14/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.14/32 dev lo"


real_server 10.1.56.5 6379 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.1.56.5 6379"
                    }
                            }


real_server 10.2.32.2 6379 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Redis-master 10.2.32.2 6379"
                    }
                            }
                                     }

!##############################################################################################


virtual_server 10.2.200.3 80          {
virtualhost 10.2.200.3:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.2.200.3/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.2.200.3/32 dev lo"


real_server 10.2.21.201 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.202 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.203 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.204 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.205 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                    }

!##########################################################################################


virtual_server 10.2.200.3 8006      {
virtualhost 10.2.200.3:8006
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    persistence_timeout 3600
    protocol TCP


real_server 10.2.21.201 8006  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.202 8006  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.203 8006  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.204 8006  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.21.205 8006  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.46 3306      {
virtualhost 10.9.200.46:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.46/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.46/32 dev lo"


real_server 10.1.99.4 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.99.4"
                    }
                            }


real_server 10.2.99.4 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.99.4"
                    }
                            }
                                   }

!##############################################################################################


virtual_server 10.9.200.22 3306         {
virtualhost 10.9.200.22:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.22/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.22/32 dev lo"


real_server 10.1.72.11 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.72.11"
                  }
                           }


real_server 10.2.72.11 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.72.11"
                  }
                           }
                                        }

!##############################################################################################


virtual_server 10.9.200.23 3306        {
virtualhost 10.9.200.23:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.23/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.23/32 dev lo"


real_server 10.1.72.11 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.11"
                  }
                           }


real_server 10.2.72.11 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.11"
                  }
                           }
                                      }

!##############################################################################################


virtual_server 10.9.200.2 3306      {
virtualhost 10.9.200.2:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.2/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.2/32 dev lo"


real_server 10.1.72.32 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.32"
                    }
                            }


real_server 10.1.72.33 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.33"
                    }
                           }


real_server 10.1.72.34 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.34"
                    }
                            }


real_server 10.2.72.32 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.32"
                    }
                             }


real_server 10.2.72.33 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.33"
                    }
                             }


real_server 10.2.72.34 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.34"
                    }
                             }
                                        }

!##############################################################################################


virtual_server 10.9.200.24 3306     {
virtualhost 10.9.200.24:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.24/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.24/32 dev lo"


real_server 10.1.72.31 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.72.31"
                    }
                             }


real_server 10.2.72.31 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.72.31"
                  }
                             }
                                    }

!##############################################################################################


virtual_server 10.9.200.25 3306    {
virtualhost 10.9.200.25:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.25/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.25/32 dev lo"


real_server 10.1.72.31 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.72.31"
                    }
                             }


real_server 10.2.72.31 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.72.31"
                    }
                             }
                                   }

!##############################################################################################


virtual_server 10.9.200.12 6379    {
virtualhost 10.9.200.12:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.12/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.12/32 dev lo"


real_server 10.1.62.2 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.2 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.7 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.51 6379    {
virtualhost 10.9.200.51:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.51/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.51/32 dev lo"


real_server 10.1.62.2 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.2 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.7 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.13 6379    {
virtualhost 10.9.200.13:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.13/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.13/32 dev lo"


real_server 10.1.62.2 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.2 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.7 16392 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.48 6379    {
virtualhost 10.9.200.48:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.48/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.48/32 dev lo"


real_server 10.1.62.5 16390 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.6 16390 {
        TCP_CHECK { 
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.49 6379    {
virtualhost 10.9.200.49:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.49/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.49/32 dev lo"


real_server 10.1.62.5 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.1.62.3 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.60.4 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                   

real_server 10.2.60.6 16391 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.67 3306     {
virtualhost 10.9.200.67:3306
        delay_loop 12
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.67/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.67/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.27"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.27"
                  }
                           }
                                   }

!##############################################################################################


virtual_server 10.9.200.68 3306   {
virtualhost 10.9.200.68:3306
        delay_loop 13
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.68/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.68/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.18.27"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.18.27"
                  }
                           }
                                   }

!##########################################################################################


virtual_server 10.9.200.29 3306   {
virtualhost 10.9.200.29:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.29/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.29/32 dev lo"


real_server 10.1.36.10 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.36.10"
                    }
                             }


real_server 10.2.75.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.75.2"
                    }
                            }
                                  }

!##############################################################################################


virtual_server 10.9.200.30 3306  {
virtualhost 10.9.200.30:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.30/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.30/32 dev lo"


real_server 10.1.36.10 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.36.20"
                   }
                             }


real_server 10.2.75.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.75.3"
                    }
                            }
                                     }

!##############################################################################################


virtual_server 10.9.200.71 5433      {
virtualhost 10.9.200.71:5433 
        delay_loop 10
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        persistence_timeout 3600
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.71/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.71/32 dev lo"


real_server 10.2.11.21 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                           }


real_server 10.2.11.22 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                            }


real_server 10.2.11.23 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                           }
                                     }

!#############################################################################################


virtual_server 10.9.200.61 3306        {
virtualhost 10.9.200.61:3306
        delay_loop 14
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.61/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.61/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.25"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.25"
                  }
                           }
                                        }

!##############################################################################################	


virtual_server 10.9.200.55 3306      {
virtualhost 10.9.200.55:3306
        delay_loop 15
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.55/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.55/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.21"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.21"
                  }
                           }
                                       }

!##############################################################################################


virtual_server 10.9.200.56 3306       {
virtualhost 10.9.200.56:3306
        delay_loop 16
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.56/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.56/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.18.21"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.18.21"
                  }
                           }
                                       }

!##############################################################################################


virtual_server 10.9.200.53 3306       {
virtualhost 10.9.200.53:3306
        delay_loop 17
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.53/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.53/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
                 misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.20"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.20"
                  }
                           }
                                      }

!##############################################################################################


virtual_server 10.9.200.54 3306      {
virtualhost 10.9.200.54:3306
        delay_loop 18
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.54/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.54/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.1.18.20"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-replica 10.2.18.20"
                  }
                           }
                                      }

!##############################################################################################


virtual_server 10.9.200.59 3306       {
virtualhost 10.9.200.59:3306
        delay_loop 19
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.59/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.59/32 dev lo"


real_server 10.1.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.18.23"
                  }
                           }


real_server 10.2.18.2 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.18.23"
                  }
                           }
                                         }

!##############################################################################################


virtual_server 10.9.200.65 5433      {
virtualhost 10.9.200.65:5433
        delay_loop 10
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        persistence_timeout 3600
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.65/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.65/32 dev lo"


real_server 10.1.72.61 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                           }


real_server 10.1.72.62 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                            }


real_server 10.1.72.63 5433  {
       weight 1
       TCP_CHECK {
           connect_timeout 3
                  }
                           }
                                     }

!#############################################################################################


virtual_server 10.9.200.62 80       {
virtualhost 10.9.200.62:80
        delay_loop 20
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        protocol TCP

    quorum 1   

        quorum_up "/sbin/ip -4 addr add 10.9.200.62/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.62/32 dev lo"


real_server 10.1.18.2 80 {
        TCP_CHECK {
            connect_ip 10.1.18.24
            connect_timeout 3
                   }
                           }


real_server 10.2.18.2 80 {
        TCP_CHECK {
            connect_ip 10.2.18.24
            connect_timeout 3
                   }
                           }
                                     }

!#############################################################################################


virtual_server 10.9.200.62 443      {
virtualhost 10.9.200.62:443
        delay_loop 21
        alpha 1
        omega 1
        lb_algo sh
        lb_kind TUN
        protocol TCP


real_server 10.1.18.2 443 {
        TCP_CHECK {
            connect_ip 10.1.18.24
            connect_timeout 3
                   }
                           }


real_server 10.2.18.2 443 {
        TCP_CHECK {
            connect_ip 10.2.18.24
            connect_timeout 3
                   }
                           }
                                      }

!#############################################################################################


virtual_server 10.9.200.3 9306        {
virtualhost 10.9.200.3:9306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.3/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.3/32 dev lo"


real_server 10.1.29.7 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.1.29.8 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.69.2 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.69.4 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##############################################################################################


virtual_server 10.9.200.15 8080   {
virtualhost 10.9.200.15:8080
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.15/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.15/32 dev lo"


real_server 10.1.18.3 8080  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
            connect_ip 91.207.59.18
                   }
                            }


real_server 10.2.18.4 8080  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
            connect_ip 194.190.77.18
                   }
                            }
                                   }

!##########################################################################################


virtual_server 10.9.200.15 80   {
virtualhost 10.9.200.15:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP


real_server 10.1.18.3 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
            connect_ip 91.207.59.18
                   }
                            }


real_server 10.2.18.4 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
            connect_ip 194.190.77.18
                   }
                            }
                                   }

!##########################################################################################


virtual_server 10.9.200.66 80   {
virtualhost 10.9.200.66:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.66/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.66/32 dev lo"


real_server 10.1.18.3 80 {
        TCP_CHECK {
            connect_ip 10.1.18.40
            connect_timeout 3
                   }
                           }


real_server 10.2.18.4 80 {
        TCP_CHECK {
            connect_ip 10.2.18.40
            connect_timeout 3
                   }
                           }
                                     }

!##############################################################################################


virtual_server 10.9.200.20 80      {
virtualhost 10.9.200.20:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.20/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.20/32 dev lo"


real_server 10.1.61.8 80  {
       weight 1
        TCP_CHECK {
            connect_ip 10.1.61.9
            connect_timeout 3
                   }
                            }


real_server 10.2.61.100 80  {
       weight 1
        TCP_CHECK {
            connect_ip 10.2.61.101
            connect_timeout 3
                   }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.20 443      {
virtualhost 10.9.200.20:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP


real_server 10.1.61.8 443  {
       weight 1
        TCP_CHECK {
            connect_ip 10.1.61.9
            connect_timeout 3
                   }
                            }


real_server 10.2.61.100 443  {
       weight 1
        TCP_CHECK {
            connect_ip 10.2.61.101
            connect_timeout 3
                   }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.21 80         {
virtualhost 10.9.200.21:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.21/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.21/32 dev lo"


real_server 10.1.61.8 80  {
       weight 1
        TCP_CHECK {
            connect_ip 10.1.61.9
            connect_timeout 3
                   }
                            }


real_server 10.2.61.100 80  {
       weight 1
        TCP_CHECK {
            connect_ip 10.2.61.101
            connect_timeout 3
                   }
                            }
                                   }

!##########################################################################################


virtual_server 10.9.200.44 25       {
virtualhost 10.9.200.44:25
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.44/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.44/32 dev lo"


real_server 10.1.18.3 25 {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 91.207.59.16
                   }
                           }


real_server 10.2.18.4 25 {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 194.190.77.16
                   }
                           }
                                          }

!###############################################################################################


virtual_server 10.9.200.5 80      {
virtualhost 10.9.200.5:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.5/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.5/32 dev lo"


real_server 10.1.34.11 80  {
        weight 1
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Crossdomain 10.1.34.11"
                    }
                            }

!vb-102
real_server 10.1.34.12 80  {
        weight 1
        MISC_CHECK {
                 misc_path "/etc/keepalived/HC/HC-Crossdomain 10.1.34.12"
                    }
                            }


real_server 10.1.34.13 80  {
        weight 1
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Crossdomain 10.1.34.13"
                    }
                            }


real_server 10.2.74.11 80  {
        weight 1
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Crossdomain 10.2.74.11"
                    }
                            }


real_server 10.2.74.12 80  {
        weight 1
        MISC_CHECK {
                 misc_path "/etc/keepalived/HC/HC-Crossdomain 10.2.74.12"
                  }
                            }


real_server 10.2.74.13 80  {
        weight 1
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-Crossdomain 10.2.74.13"
                    }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.8 80      {
virtualhost 10.9.200.8:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo rr
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.8/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.8/32 dev lo"


real_server 10.1.31.11 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.71.11 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                   }

!##########################################################################################


virtual_server 10.9.200.60 80           {
virtualhost 10.9.200.60:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.60/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.60/32 dev lo"


real_server 10.1.18.3 80 {
        TCP_CHECK {
            connect_ip 10.1.18.32
            connect_timeout 3
                   }
                           }


real_server 10.2.18.4 80 {
        TCP_CHECK {
            connect_ip 10.2.18.32
            connect_timeout 3
                   }
                           }

  
real_server 10.1.64.2 80 {  
        TCP_CHECK { 
            connect_ip 10.1.64.43
            connect_timeout 3
                   }
                           }


real_server 10.2.18.5 80 {
        TCP_CHECK {
            connect_ip 10.2.18.43
            connect_timeout 3
                   }
                           }
                                         }

!##############################################################################################


virtual_server 10.9.200.1 53      {
virtualhost 10.9.200.1:53
    delay_loop 10
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol UDP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.1/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.1/32 dev lo"


real_server 91.207.59.200 53 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DNS 91.207.59.200"
                    }
                              }


real_server 193.232.148.66 53 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DNS 193.232.148.66"
                    }
                               }
                                   }

!##########################################################################################


virtual_server 10.9.200.1 53         {
virtualhost 10.9.200.1:53
    delay_loop 10
    alpha 1
    omega 1
    lb_algo rr
    lb_kind TUN
    protocol TCP


real_server 91.207.59.200 53 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DNS 91.207.59.200"
                    }
                              }


real_server 193.232.148.66 53 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DNS 193.232.148.66"
                    }
                               }
                                      }

!##########################################################################################


virtual_server 10.9.200.70 9200     {
virtualhost 10.9.200.70:9200
     delay_loop 10
     alpha 1
     omega 1
     lb_algo rr
     lb_kind TUN
     protocol TCP

     quorum 1

     quorum_up "/sbin/ip -4 addr add 10.9.200.70/32 dev lo"
     quorum_down "/sbin/ip -4 addr del 10.9.200.70/32 dev lo"


real_server 10.1.58.5 9200 {
        TCP_CHECK {
            connect_timeout 3
            connect_port 6379
                   }
                             }


real_server 10.1.58.6 9200 {
        TCP_CHECK {
            connect_timeout 3
            connect_port 6379
                  }
                            }


real_server 10.1.58.9 9200 {
        TCP_CHECK {
            connect_timeout 3
            connect_port 6379
                  }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.70 6379     {
virtualhost 10.9.200.70:6379
  delay_loop 10
  alpha 1
  omega 1
  lb_algo rr
  lb_kind TUN
  protocol TCP



real_server 10.1.58.5 6379 {
        TCP_CHECK {
            connect_timeout 3
                  }
                             }


real_server 10.1.58.6 6379 {
        TCP_CHECK {
            connect_timeout 3
                  }
                            }


real_server 10.1.58.9 6379 {
        TCP_CHECK {
            connect_timeout 3
                  }
                            }
                                       }

!##########################################################################################


virtual_server 10.9.200.41 80      {
virtualhost 10.9.200.41:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.41/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.41/32 dev lo"


real_server 10.1.73.6 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.59.6 80  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                      }

!##########################################################################################


virtual_server 10.9.200.41 443      {
virtualhost 10.9.200.41:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    persistence_timeout 3600
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.41/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.41/32 dev lo"


real_server 10.1.73.6 443  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.59.6 443  {
        weight 1
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                    }

!##########################################################################################


virtual_server 10.9.200.72 6379     {
virtualhost 10.9.200.72:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.72/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.72/32 dev lo"


real_server 10.2.59.14 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }


real_server 10.2.59.15 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }
                                     }

!##############################################################################################


virtual_server 10.9.200.73 80      {
virtualhost 10.9.200.73:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.73/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.73/32 dev lo"


real_server 10.1.99.2 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.99.2 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                         }

!##########################################################################################


virtual_server 10.9.200.73 443      {
virtualhost 10.9.200.73:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP


real_server 10.1.99.2 443  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.99.2 443  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                         }

!##########################################################################################


virtual_server 10.9.200.27 3306     {
virtualhost 10.9.200.27:3306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.27/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.27/32 dev lo"


! This is the RS to comment out
!real_server 10.1.72.53 3306 {
!        MISC_CHECK {
!             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.72.53"
!                  }
!                           }
!

real_server 10.2.72.53 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.72.53"
                  }
                           }
                                    }                                                       

!##############################################################################################  


virtual_server 10.9.200.31 3306   {  
virtualhost 10.9.200.31:3306
        delay_loop 10
        alpha 1
        omega 1                
        lb_algo lc    
        lb_kind TUN      
        protocol TCP   
                
    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.31/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.31/32 dev lo"


real_server 10.1.72.71 3306 {
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.1.72.71"
                  }
                           }


real_server 10.2.72.71 3306 {   
        MISC_CHECK {
             misc_path "/etc/keepalived/HC/HC-DB-master 10.2.72.71"
                  }
                           }
                                  }

!##############################################################################################


virtual_server 10.9.200.74 9306    {
virtualhost 10.9.200.74:9306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.74/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.74/32 dev lo"


real_server 10.1.99.5 9306 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.99.55 9306 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.75 6379     {
virtualhost 10.9.200.75:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.75/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.75/32 dev lo"


real_server 10.1.46.21 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }


real_server 10.2.42.21 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }
                                     }

!##############################################################################################


virtual_server 10.9.200.76 6379     {
virtualhost 10.9.200.76:6379
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.76/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.76/32 dev lo"


real_server 10.1.73.26 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }


real_server 10.2.59.20 6379 {
        TCP_CHECK {
            connect_timeout 3
                   }
                             }
                                     }
									 
!##############################################################################################


virtual_server 10.9.200.77 9001    {
virtualhost 10.9.200.77:9001
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.77/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.77/32 dev lo"


real_server 10.2.11.2 9001 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.11.3 9001 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   

real_server 10.2.11.21 9001 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.11.22 9001 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   

real_server 10.2.11.23 9001 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   
                                    }

!##############################################################################################


virtual_server 10.9.200.78 9002    {
virtualhost 10.9.200.78:9002
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.78/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.78/32 dev lo"


real_server 10.2.11.2 9002 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.11.3 9002 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   

real_server 10.2.11.21 9002 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.11.22 9002 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   

real_server 10.2.11.23 9002 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
						   
                                    }

!##############################################################################################


virtual_server 10.9.200.79 8123    {
virtualhost 10.9.200.79:8123
        delay_loop 10
        alpha 1
        omega 1
        lb_algo lc
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.79/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.79/32 dev lo"


real_server 10.2.11.2 8123 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }


real_server 10.2.11.3 8123 {
        TCP_CHECK {
            connect_timeout 3
                   }
                           }
                                    }

!##############################################################################################


virtual_server 10.9.200.80 9306        {
virtualhost 10.9.200.80:9306
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.80/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.80/32 dev lo"


real_server 10.1.44.40 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.2.24.19 9306  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##############################################################################################



virtual_server 10.9.200.81 80        {
virtualhost 10.9.200.81:80
        delay_loop 10
        alpha 1
        omega 1
        lb_algo rr
        lb_kind TUN
        protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.81/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.81/32 dev lo"


real_server 10.1.66.5 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }


real_server 10.1.66.6 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##############################################################################################


virtual_server 10.9.200.82 80      {
virtualhost 10.9.200.82:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.82/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.82/32 dev lo"


real_server 10.1.44.40 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }

real_server 10.2.24.19 80  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##########################################################################################


virtual_server 10.9.200.82 443      {
virtualhost 10.9.200.82:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.82/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.82/32 dev lo"


real_server 10.1.44.40 443  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }

real_server 10.2.24.19 443  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##########################################################################################


virtual_server 10.9.200.82 9312      {
virtualhost 10.9.200.82:9312
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.82/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.82/32 dev lo"


real_server 10.1.44.40 9312  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }

real_server 10.2.24.19 9312  {
        TCP_CHECK {
            connect_timeout 3
                   }
                            }
                                      }

!##########################################################################################


virtual_server 10.9.200.42 80      {
virtualhost 10.9.200.42:80
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.42/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.42/32 dev lo"


real_server 10.1.64.3 80  {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 10.1.64.13
                   }
                            }

real_server 10.2.18.5 80  {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 10.2.18.44
                   }
                            }
                                      }
									  
!##########################################################################################


virtual_server 10.9.200.42 443      {
virtualhost 10.9.200.42:443
    delay_loop 5
    alpha 1
    omega 1
    lb_algo lc
    lb_kind TUN
    protocol TCP

    quorum 1

        quorum_up "/sbin/ip -4 addr add 10.9.200.42/32 dev lo"
        quorum_down "/sbin/ip -4 addr del 10.9.200.42/32 dev lo"


real_server 10.1.64.3 443  {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 10.1.64.13
                   }
                            }

real_server 10.2.18.5 443  {
        TCP_CHECK {
            connect_timeout 3
            connect_ip 10.2.18.44
                   }
                            }
                                      }
									  
!##########################################################################################
